#!/usr/bin/env ruby
require 'colorize'
require_relative '../lib/select_files'
require_relative '../lib/ruby_file'
require_relative '../lib/errors_checker'

# If no files are detected
if select_files == []
  puts 'No Ruby file is detected!'
  puts "Please, make sure you're in the right directory or your file ends with .rb extension."
else
  select_files.each do |file|
    new_file = RubyFile.new(file)
    file_name = new_file.name
    file_lines = new_file.lines_maker
    check = ErrorsChecker.new(file_lines, file_name)
    check.trailing_spaces
    check.correct_indentation
    check.empty_lines
    check.empty_line_at_bottom
    check.end_keyword
    check.braces_brackets_parenthesis
    check.pipes
    puts "#{file_name} has no offenses".green if check.no_offenses == true
  end
end
